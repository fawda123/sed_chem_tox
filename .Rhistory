left_join(colprs, by = 'grps') %>%
mutate(grps = factor(grps))
dim(toplo)
colprs
head(colprs)
grps
toplo <- dat_frm %>%
mutate(grps = grps)
head(toplo)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colprs, by = 'grps')
toplo <- dat_frm %>%
mutate(grps = colprs$grps, cols = colprs$cols) %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_point(position = 'dodge', colour = colprs$cols) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
dim(toplo)
ggplot(toplo, aes(x = grps, y = val)) +
geom_point(position = 'dodge', colour = toplo$cols) +
facet_wrap(~var, ncol = 5)
grps
kmeans(datfrm, 5)
kmeans(dat_frm, 5)
row.names(dat_frm)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
lef_join(colgrp, by = 'grps')
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
lef_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
leftjoin(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
ngrps <- 5
grps <- kmeans(dat_frm, centers = ngrps) %>%
.$cluster
cols <- mapviewGetOption("vector.palette")(ngrps)
colgrp <- data.frame(
grps = c(1:ngrps),
cols = cols
)
colprs <- colgrps %>%
left_join(
data.frame(grps = grps), ., by = 'grps'
)
pairs(dat_frm, gap = 0, cex = 0.5, col = as.character(colprs$cols))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_point(position = 'dodge', colour = toplo$cols) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo[, c('grps', 'cols')] %>% unique
ggplot(toplo, aes(x = grps, y = val)) +
geom_point(colour = toplo$cols) +
facet_wrap(~var, ncol = 5)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
?geom_jitter
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.8, width = 0.3) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.8, width = 0.2) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.8, width = 0.1) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val, fill = grps)) +
geom_violin() +
facet_wrap(~var, ncol = 5) +
mythm +
scale_fill_manual(values = colord)
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val, fill = grps)) +
geom_violin() +
facet_wrap(~var, ncol = 5) +
mythm +
scale_fill_manual(values = colord$cols)
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val, fill = grps)) +
geom_violin() +
facet_wrap(~var, ncol = 5) +
mythm +
scale_fill_manual(values = as.character(colord$cols)) +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.5, width = 0.1) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
head(colprs)
dim(colprs)
dim(dat_frm)
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
pairs(dat_frm, gap = 0, cex = 0.5, col = as.character(toplo$cols))
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.5, width = 0.1) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
colprs
head(dat_grm)
View(rbind(grps, colprs))
View(cbind(grps, colprs))
data.frame(grps = grps)
ngrps <- 5
grps <- kmeans(dat_frm, centers = ngrps) %>%
.$cluster
cols <- mapviewGetOption("vector.palette")(ngrps)
colgrp <- data.frame(
grps = c(1:ngrps),
cols = cols,
stringsAsFactors = F
)
colprs <- colgrps %>%
left_join(
data.frame(grps = grps), ., by = 'grps'
)
pairs(dat_frm, gap = 0, cex = 0.5, col = as.character(colprs$cols))
ngrps <- 5
grps <- kmeans(dat_frm, centers = ngrps) %>%
.$cluster
cols <- mapviewGetOption("vector.palette")(ngrps)
colgrp <- data.frame(
grps = c(1:ngrps),
cols = cols,
stringsAsFactors = F
)
colprs <- colgrp %>%
left_join(
data.frame(grps = grps), ., by = 'grps'
)
pairs(dat_frm, gap = 0, cex = 0.5, col = as.character(colprs$cols))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.5, width = 0.1) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements', limits = c(-2.5, 3))
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_jitter(colour = toplo$cols, alpha = 0.5, width = 0.1) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
colgrp <- data.frame(
grps = c(1:ngrps),
cols = cols,
stringsAsFactors = F
)
colprs <- colgrp %>%
left_join(
data.frame(grps = grps), ., by = 'grps'
)
cbind(grps, colprs)
colprs <- left_join(
data.frame(grps = grps), colgrp, by = 'grps'
)
head(colprs)
colgrp
?kmeans
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(width = 0.3) +
geom_jitter(colour = toplo$cols, alpha = 0.5, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
?geom_boxplot
windows()
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = 0) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = 0) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = NA) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = NULL) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = -1) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = -1, width = 0.2) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = -1, width = 0.3) +
geom_jitter(colour = toplo$cols, alpha = 0.3, width = 0.15) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
toplo <- dat_frm %>%
mutate(grps = grps) %>%
left_join(colgrp, by = 'grps') %>%
mutate(grps = factor(grps)) %>%
gather('var', 'val', -grps, -cols)
mythm <- theme_bw(base_family = 'serif') +
theme(
legend.position = 'none',
strip.background = element_blank(),
plot.margin = margin(0, 2, 0, 2, "pt")
)
colord <- unique(toplo[, c('grps', 'cols')])
ggplot(toplo, aes(x = grps, y = val)) +
geom_boxplot(outlier.size = -1) +
geom_jitter(colour = toplo$cols, alpha = 0.3) +
facet_wrap(~var, ncol = 5) +
mythm +
scale_y_continuous('Standardized measurements')
library(tidyverse)
library(GGally)
library(vegan)
library(ggdendro)
library(dendextend)
library(FactoMineR)
library(ggord)
library(mapview)
library(sf)
data(dat)
locs <- dat %>%
select(station, lon, lat)
evvr <- dat %>%
select(-depth, -lat, -lon)
apply(evvr, 2, function(x) sum(is.na(x)))
dim(evvr)
?
kmeans
?ggord
